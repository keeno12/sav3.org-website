<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <title>RottenSwap Memes</title>
      <style>
        body {
          margin: 0
        }
        p {
          font-family: Roboto Mono;
          display: block; 
          max-width: 600px; 
          margin: auto;
          text-align: center;
          padding: 8px;
        }
        img, video {
          display: block; 
          max-width: 600px; 
          margin: auto;
        }
        @media (max-width: 600px) {
          img, video {
            max-width: 95vw; 
          }
        }
      </style>
  </head>
  <body>
    <script>
      (async () => {
        const response = await fetch('https://api.github.com/repos/rottenswap/memes/contents/memesFolder')
        const data = await response.json();
        const message = document.createElement('p')
        message.innerHTML = 'To add memes join <a href="https://t.me/rottenswap">https://t.me/rottenswap</a> and send your meme as a picture with the caption <a href="">/add_meme</a>'
        document.body.appendChild(message)

        for (let file of data) {
          if (file.name.match(/(html|htm)$/i) || file.name.startsWith('.')) {
            continue
          }
          let meme
          if (file.name.match(/(mov|mp4|webm)$/i)) {
            meme = document.createElement('video')
            meme.muted = true
            meme.autoplay = true
            meme.loop = true
            meme.controls = true
          }
          else {
            meme = document.createElement('img')
          }
          meme.src = file.download_url
          document.body.appendChild(meme)
        }
      })()
    </script>
  <body>
</html>
